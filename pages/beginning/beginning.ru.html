<div class="shmakowiki"><h2>Что такое БЭМ?</h2><p>В Яндексе свёрстали множество проектов, счёт страниц идёт на десятки тысяч. Подходы, применяемые разработчиками Яндекса к HTML/CSS-вёрстке и клиентскому коду вообще, постоянно эволюционировали.</p><p>Проекты, разрабатываемые в Яндексе, и процессы их разработки имеют ряд особенностей:</p><ul><li>Типовые проекты должны разрабатываться быстро, но жить долго<br/>
   Нужно уметь за короткий срок создать проект, архитектура которого позволит без
   труда поддерживать и развивать его долгие годы.</li><li>Над проектом работает много людей<br/>
   Нужно уметь эффективно организовывать работу команд, как из 1–2 разработчиков,
   так и из десятков.</li><li>Масштабируемость команд<br/>
   Добавление новых людей в команду должно улучшать производительность. Необходима
   возможность быстро вводить новых разработчиков в курс дела и выделять им
   собственные зоны ответственности.<br/>
   Для того, чтобы с одним и тем же кодом можно было работать долгое время и разным
   составом команды, код должен быть хорошо структурирован.</li><li>Повторное использование кода<br/>
   Каждый новый проект или фича не должны писаться с нуля. Если где-то внутри
   компании уже выполнялась похожая задача, нужно максимально повторно использовать
   полученный в результате код.</li></ul><p>Мы искали решения возникающих перед нами проблем. Начиная с какого-то момента, эти решения составили <tt>методологию БЭМ</tt>.<br/> Один из самых распространённых примеров методологии в программировании – это ООП. ООП – парадигма программирования, применимая во многих языка. Точно также и методология БЭМ – способ описания действительности в коде, набор паттернов и способ думать о сущностях вне зависимости от того, на каком языке программирования это реализуется.<br/> На основе этой методологии разработаны подходы к вёрстке и технические решения, которые позволяют нам быстро создавать новые страницы и легко поддерживать уже существующие.</p><p><tt>БЭМ</tt> расшифровывается как Блок-Элемент-Модификатор, смысл этих терминов раскрыт ниже.<br/> В этой статье описаны теоретические аспекты подходов к web-разработке, применяемых в Яндексе. Помимо теории у нас, конечно, есть и практические разработки библиотек и инструментов. Ссылки на них представлены в тексте статьи как дополнительные материалы.</p><p>Итак, каким принципам отвечают наш код и процессы разработки:</p><h2>Единая предметная область</h2><p>Представьте обычный сайт. Например, такой как на картинке.</p><div style="text-align:center">
<img src="images/site.png"/>
</div><p>При разработке и развитии сайта удобно мысленно выделить «блоки», из которых сайт состоит.<br/> Например, на этом макете есть <tt>Шапка</tt>, <tt>Основной лайаут</tt> и <tt>Подвал</tt>. Шапка в свою очередь состоит из <tt>Логотипа</tt>, <tt>Поиска</tt>, <tt>Блока авторизации</tt> и <tt>Меню</tt>. Основной лайаут содержит <tt>Заголовок страницы</tt> и <tt>Блок текста</tt>.</p><div style="text-align:center">
<img src="images/site-marked.png"/>
</div><p>Если у каждой части сайта есть название, этими терминами удобно пользоваться при общении внутри команды. Менеджер может попросить</p><ul><li>увеличить <tt>Шапку</tt>, или</li><li>Сделать ещё одну страницу, где в <tt>Шапке</tt> нет <tt>Поиска</tt></li></ul><p>Можно попросить JavaScript-разработчика</p><ul><li>Сделать <tt>Блок авторизации</tt> анимированным, и т.д.</li></ul><p>Итак,</p><h3>Блок</h3><p>Мы называем блоком некоторую самостоятельную сущность, кирпичик проекта. Блок может быть простым или составным, то есть содержать в себе другие блоки.</p><p><b>Пример</b><br/> Блок поисковой формы<br/></p><div style="text-align:center">
<img src="images/search-block.png"/>
</div><h3>Элемент</h3><p>Элемент – это какая-то часть блока, отвечающая за отдельную функцию. Элемент может находиться только в составе блока и не имеет смысла в отрыве от него.</p><p><b>Пример</b><br/> Поле ввода и кнопка — элементы блока</p><div style="text-align:center">
<img src="images/search-block-marked.png"/>
</div><h2>Cредства описания страницы и шаблоны</h2><p>Блоки и элементы – это обозначение содержания страницы. Помимо факта присутствия конкретных блоков на странице, важно также их расположение.</p><p>Блоки (или элементы) могут идти друг за другом в определённом порядке:</p><p>Например, товары в интернет-магазине:</p><div style="text-align:center">
<img src="images/goods-list.png"/>
</div><p>Или пункты меню:</p><div style="text-align:center">
<img src="images/menu-items.png"/>
</div><p>Блоки могут быть вложены друг в друга:</p><p>Например, блок Шапка содержит другие блоки:</p><div style="text-align:center">
<img src="images/head-marked.png"/>
</div><p>Чтобы быстро изменять содержание страницы, добавлять новые блоки, перемещать их друг относительно друга, нужен способ описания страницы в виде текста. Для этого необходимо, чтобы каждому блоку или элементу соответствовало ключевое слово.</p><p>Ключевое слово, обозначающее конкретный блок, называется <tt>именем блока</tt>.</p><p>Например, <tt>menu</tt> для меню или <tt>head</tt> для шапки сайта.</p><p>Ключевое слово, обозначающее элемент, называется <tt>именем элемента</tt>.</p><p>Например, каждый пункт меню – это элемент <tt>item</tt> блока <tt>menu</tt>.</p><p>Имя блока должно быть уникальным, из него однозначно следует, о каком блоке идёт речь. Одинаковые имена могут быть только у одинаковых блоков. В этом случае мы говорим о том, что один блок представлен на странице 2 (3, 4, ...) раза.</p><p>Имя элемента должно быть уникальным только в пределах блока. Элемент может повторяться в блоке несколько раз. Например, пункты меню.</p><div style="text-align:center">
<img src="images/menu-items.png"/>
</div><p>Такие ключевые слова нужно размещать в определённом порядке. Для этого подойдут форматы данных с использованием вложенности. Например, XML или JSON:</p><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:page<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:head<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:menu<span class="ohl-punctuation">&gt;</span></span>
      ...
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:menu<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:logo<span class="ohl-punctuation">/&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:column<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:search<span class="ohl-punctuation">&gt;</span></span>
        <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:input<span class="ohl-punctuation">/&gt;</span></span>
        <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:button<span class="ohl-punctuation">&gt;</span></span>Search<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:button<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:search<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:column<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:auth<span class="ohl-punctuation">&gt;</span></span>
        ...
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:auth<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:head<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:page<span class="ohl-punctuation">&gt;</span></span></code></pre><p>В данном примере пространства имён <tt>b</tt> и <tt>e</tt> использованы, чтобы отделять узлы про блоки от узлов про элементы.</p><p>То же самое в JSON:</p><pre class="ohl ohl-js"><code><span class="ohl-punctuation">{</span>
  <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>page<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
  <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>head<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
    <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
      <span class="ohl-punctuation">{</span> <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>column<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>logo<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
      <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>column<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
          <span class="ohl-punctuation">{</span>
            <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>search<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
              <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>input<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
              <span class="ohl-punctuation">{</span>
                <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>button<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
                <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Search<span class="ohl-punctuation">&apos;</span></span>
              <span class="ohl-punctuation">}</span>
            <span class="ohl-punctuation">]</span>
          <span class="ohl-punctuation">}</span>
        <span class="ohl-punctuation">]</span>
      <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>column<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
          <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>i-auth<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
          <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
        <span class="ohl-punctuation">}</span>
      <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">]</span>
  <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span></code></pre><p>На примерах выше приведена объектная модель с вложенностью блоков и элементов в другие блоки. Также в описании страницы присутствуют произвольные данные.<br/> Такую структуру мы назваем <tt>БЭМ-деревом</tt> (по аналогии с DOM-деревом).</p><p>Конечный HTML для браузера получается из БЭМ-дерева страницы путём наложения шаблонов (например, XSL-шаблоны или JavaScript).</p><p>Если разработчику нужно переместить блок в другое место на странице, это делается при помощи изменения дерева. Конечный вид шаблоны сделают сами.</p><p>В своих последних разработках мы ориентируемся на JSON как формат описания страницы. Он превращается в HTML при помощи JavaScript-based шаблонизатора.<br/> Ссылки на конкретные инструменты можно найти в конце статьи.</p><h2>Независимость блоков</h2><p>Во время разработки или поддержки долгоживущего проекта, может возникнуть желание переместить блок. Например, стоит задача</p><ul><li>Поменять местами <tt>Логотип</tt> и <tt>Блок авторизации</tt>, или</li><li>Разместить <tt>Меню</tt> под <tt>Поиском</tt></li></ul><div style="text-align: center">
<img src="images/head.png"/>
</div><div style="text-align: center">
<img src="images/head-changed.png"/>
</div><p>Для того, чтобы легко выполнять эти просьбы, блоки должны быть <tt>независимыми</tt>.</p><p><tt>Независимый</tt> блок свёрстан так, чтобы его можно было вставить в любое место на странице. В том числе и вставить в другой блок.</p><h3>Независимый CSS</h3><p>С точки зрения CSS для блока, это означает, что</p><ul><li>У блока (или элемента) должно быть уникальное «имя», на которое можно написать CSS
   правило. Например, соответствующий CSS-класс.</li><li>Не должно быть CSS-селекторов на теги</li><li>Не нужно писать каскадные селекторы из нескольких блоков</li></ul><h4>Пример схемы именования независимых CSS-классов</h4><p>Одна из возможных схем именования CSS-классов, удовлетворяющая требованиям, такая:</p><ul><li>CSS-класс блока совпадает с <tt>именем блока</tt></li></ul><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  ...
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span></code></pre><ul><li>CSS-класс элемента — это <tt>имя блока</tt> и <tt>имя элемента</tt>, разделённые
 определённым символом (или символами)</li></ul><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    ...
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    ...
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span></code></pre><p>Необходимость учитывать имя блока в CSS-классе для элемента нужна для минимизации каскада.</p><p>Правила именования CSS-классов могут быть и другими. О том, какие соглашения об именовании используются нами, можно прочесть <a href="http://bem.github.com/bem-bl/pages/naming/naming.ru.wiki">здесь</a>.</p><h3>Независимые шаблоны</h3><p>С точки зрения шаблонного движка, независимость блоков означает, что:</p><ul><li>Блоки и элементы должны иметь описание во входных данных<br/>
   У блока (или элемента) должно быть уникальное «имя», чтобы при передаче данных шаблонному движку
   можно было сказать «здесь нужно разместить Меню».</li><li>Блок может быть легко помещён в любое место в БЭМ-дереве</li></ul><h4>Пример независимых шаблонов для блоков</h4><p>Встречая во входных данных описание блока, шаблон должен однозначно преобразовывать его в нужный HTML. Для этого у каждого блока должен быть свой шаблон.</p><p>Например, в XSL это может выглядеть так:</p><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template <span class="ohl-name ohl-name-attribute">match<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>b:menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:apply-templates<span class="ohl-punctuation">/&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>xsl:template<span class="ohl-punctuation">&gt;</span></span>

<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template <span class="ohl-name ohl-name-attribute">match<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>b:menu/e:item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:apply-templates<span class="ohl-punctuation">/&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template<span class="ohl-punctuation">&gt;</span></span></code></pre><p>В своих собственных разработках мы постепенно отказываемся от XSL в пользу собственного JavaScript-based шаблонного движка <a href="https://github.com/veged/xjst">XJST</a>. Этот шаблонизатор вобрал в себя всё то, что нам нравилось в XSL, но реализует это с производительностью JavaScript как на сервере, так и на клиенте.<br/> Мы пишем шаблоны для блоков на преметно-ориентированном языке (domain specific language) BEMHTML, в основе которого лежит XJST. <a href="http://clubs.ya.ru/bem/replies.xml?item_no=992">Основные понятия шаблонизатора BEMHTML</a> опубликованы в клубе БЭМ.</p><h2>Повторяемость блоков</h2><p>На сайте может появиться второй блок <tt>Меню</tt>, например в <tt>Подвале</tt>. Или два блока <tt>Текст</tt>, разделённых рекламной вставкой.<br/> Даже если блок проектировался как единственный, на странице в любой момент может появиться второй такой же.</p><p>С точки зрения CSS это обозначает, что:</p><ul><li>Для CSS-селекторов не используются селекторы с ID<br/>
   Вместо них удобно использовать классы</li></ul><p>С точки зрения JavaScript это обозначает, что:</p><ul><li>Блоки, которым требуется одинаковое поведение, могут быть однозначно определены: у них
одинаковый CSS-класс<br/>
   Используя селекторы класса, можно выбрать все одинаковые блоки на странице и задать им нужное
   динамическое поведение.</li></ul><h2>Модифицируемость блоков и элементов</h2><p>Может возникнуть ситуация, в которой требуется не просто повторить блок, но и в внести в него незначительные изменения.<br/> Например, стоит задача:</p><ul><li>Сделать в подвале ещё одно меню, с <i>другим дизайном</i>.</li></ul><div style="text-align: center">
<img src="images/site-footer-menu.png"/>
</div><p>Чтобы не разрабатывать рядом блок, минимально отличающийся от уже существующего, нужно воспользоваться <tt>модификатором</tt>.</p><p><tt>Модификатор</tt> — это свойство блока или элемента, которое немного меняет внешний вид или поведение.<br/> Модификатор имеет имя и значение. Одновременно может использоваться несколько разных модификаторов.</p><p><b>Приммер</b><br/> Модификатор блока задаёт ему цвет фона</p><div style="text-align: center">
<img src="images/search-background.png"/>
</div><p><b>Пример</b><br/> Модификатор элемента для текущего пункта меню изменяет эго внешний вид</p><div style="text-align: center">
<img src="images/menu-current-item.png"/>
</div><p>С точки зрения входных-данных:</p><ul><li>В БЭМ-дереве модификаторы представлены как свойства той сущности, которая описывает блок или элемент</li></ul><p>Например, в XML это могут быть атрибуты соответствующего узла:</p><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:menu <span class="ohl-name ohl-name-attribute">m:type<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>big<span class="ohl-punctuation">&quot;</span></span></span> <span class="ohl-name ohl-name-attribute">m:type<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>buttons<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  ...
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:menu<span class="ohl-punctuation">&gt;</span></span></code></pre><p>То же самое в формате JSON:</p><pre class="ohl ohl-js"><code><span class="ohl-punctuation">{</span>
  <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
  <span class="ohl-name">mods</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
   <span class="ohl-punctuation">{</span> <span class="ohl-name">size</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>big<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
   <span class="ohl-punctuation">{</span> <span class="ohl-name">type</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>buttons<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
  <span class="ohl-punctuation">]</span>
<span class="ohl-punctuation">}</span></code></pre><p>C точки зрения CSS:</p><ul><li>Модификатор представляется дополнительным CSS-классом блока или элемента.</li></ul><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu menu_size_big menu_type_buttons<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  ...
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span></code></pre><pre class="ohl ohl-js"><code><span class="ohl-operator">.</span><span class="ohl-name">menu_size_big</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-comment ohl-comment-single"><span class="ohl-punctuation">//</span> CSS code to change height</span>
<span class="ohl-punctuation">}</span>
<span class="ohl-operator">.</span><span class="ohl-name">menu_type_buttons</span> <span class="ohl-operator">.</span><span class="ohl-name">menu__item</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-comment ohl-comment-single"><span class="ohl-punctuation">//</span> CSS code to change item&apos;s view</span>
<span class="ohl-punctuation">}</span></code></pre><p>Модифицируемость элементов реализуется по аналогии.</p><p>Например, модификатором можно обозначить текущий пункт меню:</p><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:menu<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>Index<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item <span class="ohl-name ohl-name-attribute">m:state<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>current<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Products<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:item<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>Contact<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:menu<span class="ohl-punctuation">&gt;</span></span></code></pre><pre class="ohl ohl-js"><code><span class="ohl-punctuation">{</span>
  <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
  <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
    <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Index<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-punctuation">{</span>
      <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
      <span class="ohl-name">mods</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>state<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>current<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Products<span class="ohl-punctuation">&apos;</span></span>
    <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Contact<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
  <span class="ohl-punctuation">]</span>
<span class="ohl-punctuation">}</span></code></pre><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout-unit<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Index<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout-unit<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item menu__item_state_current<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Products<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout-unit<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Contact<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span></code></pre><pre class="ohl ohl-js"><code><span class="ohl-operator">.</span><span class="ohl-name">menu__item_state_current</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-name">font</span><span class="ohl-operator">-</span><span class="ohl-name">weight</span><span class="ohl-operator">:</span> <span class="ohl-name">bold</span><span class="ohl-punctuation">;</span>
<span class="ohl-punctuation">}</span></code></pre><h2>Предметная абстракция</h2><p>Если над проектом работает много людей, им нужно договариваться о предметной области. У всех блоков проекта должны быть однозначные имена, которые используются в коде.</p><p>Например, реализованный на сайте блок <tt>Облаго тегов</tt> всегда называется <tt>tags</tt>, а каждый элемент (метка) в нём - <tt>tag</tt>. Это справедливо для любой технологии: CSS, JS, XSL etc.</p><p>С точки зрения процесса разработки:</p><ul><li>Все участники процесса оперируют одними терминами</li></ul><p>С точки зрения CSS:</p><ul><li>CSS блоков и элементов можно описывать на псевдо-языке, который затем компилируется в чистый
   CSS согласно принятой схеме именования.</li></ul><pre class="ohl ohl-js"><code>  <span class="ohl-operator">.</span><span class="ohl-name">menu</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-name">__layout</span> <span class="ohl-punctuation">{</span>
      <span class="ohl-name">display</span><span class="ohl-operator">:</span> <span class="ohl-name">inline</span><span class="ohl-punctuation">;</span>
    <span class="ohl-punctuation">}</span>
    <span class="ohl-name">__layout</span><span class="ohl-operator">-</span><span class="ohl-name">item</span> <span class="ohl-punctuation">{</span>
      <span class="ohl-name">display</span><span class="ohl-operator">:</span> <span class="ohl-name">inline</span><span class="ohl-operator">-</span><span class="ohl-name">block</span><span class="ohl-punctuation">;</span>
      <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-punctuation">}</span>
    <span class="ohl-name">__item</span> <span class="ohl-punctuation">{</span>
      <span class="ohl-name">_state_current</span> <span class="ohl-punctuation">{</span>
        <span class="ohl-name">font</span><span class="ohl-operator">-</span><span class="ohl-name">weight</span><span class="ohl-operator">:</span> <span class="ohl-name">bold</span><span class="ohl-punctuation">;</span>
      <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">}</span>
  <span class="ohl-punctuation">}</span></code></pre><p>С точки зрения JavaScript:</p><ul><li>Не нужно обращаться к DOM-узлам блоков и элементов по имени класса</li></ul><pre class="ohl ohl-js"><code><span class="ohl-name">$</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu__item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">click</span><span class="ohl-punctuation">(</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span> <span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">$</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu__item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">addClass</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu__item_state_current<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">$</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">toggle</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu_size_big<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">toggle</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu_size_small<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span></code></pre><p>Схема именования CSS-классов для блоков и элементов может измениться. При использовании специальных JavaScript-функций для обращения к блокам и работы с их модификаторами, нужно будет внести изменения только в эти функци</p><pre class="ohl ohl-js"><code><span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">elem</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">click</span><span class="ohl-punctuation">(</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span> <span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">elem</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">setMod</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>state<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>current<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">toggleMod</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>size<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>big<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>small<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span></code></pre><p>Приведённый здесь код - абстрактный. В реальных разработках мы используем JavaSscript-ядро блока <tt>i-bem</tt> из библиотеки bem-bl: <a href="http://bem.github.com/bem-bl/sets/common-desktop/i-bem/i-bem.ru.html">http://bem.github.com/bem-bl/sets/common-desktop/i-bem/i-bem.ru.html</a></p><h2>Консистентность блока</h2><p>На нашем сайте реализован блок Кнопка, у которого есть динамическое поведение.</p><div style="text-align: center">
<img src="images/button.png"/>
</div><p>При наведении курсора на этот блок он меняет свой внешний вид.</p><div style="text-align: center">
<img src="images/button-cursor.png"/>
</div><p>Менеджер может попросить:</p><ul><li>Использовать такую же кнопку на другой странице</li></ul><p>Просто CSS-реализации блока недостаточно. Ведь в данном случае, чтобы полностью повторить блок, нужно повторить и его поведение, описанное в JavaScript.</p><p>Таким образом, блок должен знать о себе всё. То есть реализация блока подразумевает описание его внешнего вида и поведения во всех необходимых дехнологиях. Этот принцип мы называем <tt>мультилингвальность</tt>.</p><p><tt>Мультилингвальность</tt> - это описание блока на всех языках (технологиях), необходимых для его работы.</p><p>Если блок нужно прредставить на странице, у него должны быть реализованы технологии:</p><ul><li>шаблоны (XSL, TT2, JavaScript, и т.д.), превращающие декларацию блока на странице в HTML-код</li><li>CSS, отвечающий за внешний вид блока</li></ul><p>Когда у блока также есть динамическое поведение, к этому списку добавляются:</p><ul><li>JS-реализация блока</li></ul><p>В список технологий входит всё, что относится к блоку, в том числе и:</p><ul><li>Картинки блока</li></ul></div>
